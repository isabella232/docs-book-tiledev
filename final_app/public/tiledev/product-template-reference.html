<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,400italic,400,600' rel='stylesheet' type='text/css'>
  <!-- Use title if it's in the page YAML frontmatter -->
  <title>
      Product Template Reference |
    
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/stylesheets/all.css" rel="stylesheet" media="screen, print" />
  <link href="/stylesheets/print.css" rel="stylesheet" media="print" />
  <link href='/images/favicon.ico' rel='shortcut icon'>

  <script src="/javascripts/all.js"></script>
  
<script type="text/javascript">
  if (window.location.host === 'docs.pivotal.io') {
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', '']);
    _gaq.push(['_setDomainName', '']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ga, s);
    })();
  }
</script>

<script type="text/javascript">
  var blackList = ['acceptance'];

  blackList.forEach(function(blackListedEnv) {
    if (document.URL.indexOf(blackListedEnv) > -1 && blackListedEnv != "") {
      $('head').append('<meta name="hashtag" content="PivotalMoment">');
    }
  });
</script>

<!-- CrazyEgg Tracking Script -->
  <script type="text/javascript">
  setTimeout(function(){var a=document.createElement("script");
  var b=document.getElementsByTagName("script")[0];
  a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0055/2990.js?"+Math.floor(new Date().getTime()/3600000);
  a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
  </script>

<!-- Munchkin Marketo Script -->
<script type="text/javascript">
  (function() {
    var didInit = false;

    function initMunchkin() {
      if (didInit === false) {
        didInit = true;
        Munchkin.init('625-IUJ-009');
      }
    }

    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
    s.onreadystatechange = function() {
      if (this.readyState == 'complete' || this.readyState == 'loaded') {
        initMunchkin();
      }
    };
    s.onload = initMunchkin;
    document.getElementsByTagName('head')[0].appendChild(s);
  })();
</script>

</head>

<body class="tiledev tiledev_product-template-reference has-subnav">

<div class="viewport">
  <div class='wrap'>
    <script type="text/javascript">
      document.domain = "";
    </script>

       
    <header class="header header-layout">
      <h1 class="logo">
        <a href="/">Default Book Title</a>
      </h1>
      
      <div class="header-links js-bar-links">
        <div class="btn-menu" data-behavior="MenuMobile"></div>
        
        <div class="header-item">
          
        </div>
        <!--Default search-->
<!--If book needs something different, add a book-search partial to the book's layouts folder-->
<div class="header-item searchbar js-searchbar">
  <a class="search-icon" data-behavior="Search"></a>
  <div class="search-input">
    <div class="search-input-inner" id="docs-search">
        <form method="get" action="/search">
          <input name="q" placeholder="search" class="search-box" />
        </form>
    </div>
  </div>
</div>

      </div>
    </header>



    <div class="container">

      <!--googleoff: index-->
      <div id="sub-nav" class="js-sidenav nav-container" role="navigation">
  <a class="sidenav-title" data-behavior="SubMenuMobile">
    Doc Index
  </a>
  <div class="nav-content">
    <ul>

      <li>
        <a href="index.html">PCF Tile Developers Guide</a>
      </li>

      <li class="has_submenu">
        <a href="tile-basics.html">Tile Basics</a>
        <ul>
          <li>
            <a href="cf-concepts.html">How PCF and PCF Services Work</a>
          </li>
          <li>
            <a href="tile-structure.html">How Tiles Work</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu">
        <a href="workflow.html">Tile Development Workflow</a>
        <ul>
          <li>
            <a href="overview.html">Service Integration Overview</a>
          </li>
          <li>
            <a href="stages.html">Levels of Integration</a>
          </li>
          <li>
            <a href="development.html">Development Steps at Each Level</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu">
        <a href="environments.html">Development Environments</a>
        <ul>
          <li>
            <a href="environments.html#pcfdev">PCF Dev and BOSH Lite</a>
          </li>
          <li>
            <a href="environments.html#pws">PWS or Other Supported CF Infrastructure</a>
          </li>
          <li>
            <a href="environments.html#pcf">PCF with Ops Manager</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu">
        <a href="tools.html">Development Tools</a>
        <ul>
          <li>
            <a href="tile-generator.html">Tile Generator</a>
          </li>
          <li>
            <a href="pcf-command.html">pcf Command Line Utility</a>
          </li>
          <li>
            <a href="concourse.html">Concourse CI</a>
          </li>
          <li>
            <a href="sdk.html">Services SDK</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu expanded">
        <a href="roadmap.html">Service Development Roadmap</a>
        <ul>
          <li>
            <a href="roadmap.html#user-provided">Level 1: User-Provided Service</a>
          </li>
          <li class="has_submenu">
            <a href="brokered.html">Level 2: Brokered Service</a>
            <ul>
              <li>
                <a href="service-brokers.html">Service Broker</a>
              </li>
            </ul>
           </li> 
          <li class="has_submenu">
            <a href="managed.html">Level 3: Managed Service</a>
            <ul>
              <li>
                <a href="bosh-release.html">BOSH Releases</a>
              </li>
              <li>
                <a href="tile-errands.html">Errands</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="on-demand.html">Level 4: On-Demand Service</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu">
        <a href="other-integrations.html">Other Integrations</a>
        <ul>
          <li>
            <a href="https://github.com/cloudfoundry/docs-bbr/blob/master/bbr-devguide.html.md.erb">BOSH Backup and Restore</a>
          </li>
          <li>
            <a href="buildpacks.html">Buildpacks</a>
          </li>
          <li class="has_submenu">
            <a href="credhub.html">CredHub</a>
            <ul>
              <li>
                <a href="create-credhub-vars.html">Creating New Variables in CredHub</a>
              </li>
              <li>
                <a href="migrating-credhub-credentials.html">Migrating Existing Credentials to CredHub</a>
              </li>
              <li>
                <a href="get-credhub-vars.html">Fetching Variable Names and Values</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="embedded-agents.html">Embedded Agents</a>
          </li>
          <li>
            <a href="nozzle.html">Logs, Metrics, and Nozzles</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="tile-documentation.html">Documentation</a>
      </li>

      <li class="has_submenu">
        <a href="publish.html">Publish and Update</a>
        <ul>
          <li>
            <a href="tile-upgrades.html">Tile Upgrades</a>
          </li>
          <li>
            <a href="releases.html">Partner Software Product Release Cycle</a>
          </li>
        </ul>
      </li>


      <li class="has_submenu">
        <a href="reference.html">Reference</a>
        <ul>
          <li>
            <a href="product-template-reference.html">Product Template Reference</a>
          </li>
          <li>
            <a href="property-reference.html">Property Reference</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu">
        <a href="release-notes.html">Partners Release Notices</a>
        <ul>
          <li>
            <a href="release-notes-1-12.html">PCF v1.12 Partners Release Notice</a>
          </li>
          <li>
            <a href="release-notes-1-11.html">PCF v1.11 Partners Release Notice</a>
          </li>
          <li>
            <a href="release-notes-1-10.html">PCF v1.10 Partners Release Notice</a>
          </li>
          <li>
            <a href="release-notes-1-9.html">PCF v1.9 Partners Release Notice</a>
          </li>
          <li>
            <a href="release-notes-1-8.html">PCF v1.8 Partners Release Notice</a>
          </li>
          <li>
            <a href="release-notes-1-7.html">PCF v1.7 Partners Release Notice</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="contacts.html">Contact Us</a>
      </li>

    </ul>
  </div>
</div><!--end of sub-nav-->

      <!--googleon: index-->

      <main class="content content-layout" id="js-content" role="main">
        <a id="top"></a>
        
          <h1 class="title-container" >
    Product Template Reference
  </h1>

          <div id="js-quick-links" >
            <div class="quick-links"><ul>
<li>
<a href="#top-level">Top Level Properties</a><ul>
<li><a href="#top-name">name</a></li>
<li><a href="#top-version">product_version</a></li>
<li><a href="#top-metadata">metadata_version</a></li>
<li><a href="#top-label">label</a></li>
<li><a href="#top-description">description</a></li>
<li><a href="#top-rank">rank</a></li>
<li><a href="#top-stemcell-criteria">stemcell_criteria</a></li>
<li><a href="#top-release">releases</a></li>
<li><a href="#top-post-deploy">post_deploy_errands</a></li>
<li><a href="#top-pre-delete">pre_delete_errands</a></li>
</ul>
</li>
<li>
<a href="#form-properties">Form Properties</a><ul>
<li><a href="#form-name">name</a></li>
<li><a href="#form-label">label</a></li>
<li><a href="#form-description">description</a></li>
<li><a href="#form-markdown">markdown</a></li>
<li><a href="#form-property-inputs">property_inputs</a></li>
<li><a href="#form-placeholder">placeholder</a></li>
</ul>
</li>
<li><a href="#simple-vs-complex">Simple vs. Complex Inputs (Selectors and Collections)</a></li>
<li><a href="#property-blueprints">Property Blueprints</a></li>
<li>
<a href="#configurable-props">Configurable Properties</a><ul>
<li><a href="#configurable-string">string</a></li>
<li><a href="#configurable-integer">integer</a></li>
<li><a href="#configurable-boolean">boolean</a></li>
<li><a href="#configurable-dropdown">dropdown_select</a></li>
<li><a href="#configurable-multiselect">multi_select_options</a></li>
<li><a href="#configurable-domain">domain</a></li>
<li><a href="#configurable-wildcard-domain">wildcard_domain</a></li>
<li><a href="#configurable-text">text</a></li>
<li><a href="#configurable-ldap-url">ldap_url</a></li>
<li><a href="#configurable-email">email</a></li>
<li><a href="#configurable-ips">ip_ranges</a></li>
<li><a href="#configurable-port">port</a></li>
<li><a href="#configurable-address">network_address</a></li>
<li><a href="#configurable-address-list">network_address_list</a></li>
<li><a href="#generated">Generated Properties (can also be configurable)</a></li>
<li><a href="#generated-cert-creds">rsa_cert_credentials</a></li>
<li><a href="#generated-pkey-creds">rsa_pkey_credentials</a></li>
<li><a href="#generated-salted-creds">salted_credentials</a></li>
<li><a href="#generated-simple-creds">simple_credentials</a></li>
<li><a href="#generated-secret">secret</a></li>
<li><a href="#generated-uuid">uuid</a></li>
<li><a href="#complex">Complex Properties (Selectors and Collections)</a></li>
</ul>
</li>
<li>
<a href="#job-types">Job Types</a><ul>
<li><a href="#job-name">name</a></li>
<li><a href="#job-label">resource_label</a></li>
<li><a href="#job-template">templates</a></li>
<li><a href="#job-release">release</a></li>
<li><a href="#job-static-ip">static_ip</a></li>
<li><a href="#job-dynamic-ip">dynamic_ip</a></li>
<li><a href="#job-single-az">single_az_only</a></li>
<li><a href="#job-max-in-flight">max_in_flight</a></li>
<li><a href="#job-resource-def">resource_definition</a></li>
<li><a href="#job-instance-def">instance_definition</a></li>
<li><a href="#job-manifest">manifest</a></li>
<li><a href="#named-manifest">named_manifest</a></li>
<li><a href="#selector-snippets">Selector Manifest Snippets</a></li>
<li><a href="#ops-man-snippets">Ops Manager Provided Snippets</a></li>
</ul>
</li>
</ul></div>
          </div>
        <div class="to-top" id="js-to-top">
          <a href="#top" title="back to top"></a>
        </div>
        <p>This document defines the separate pieces of a product template.
For the purpose of explanation we use the <a href="https://github.com/pivotal-cf-experimental/ops-manager-example">PCF example tile</a>,
a functional tile provided by the Ops Manager engineering team that deploys the NGINX web server.</p>

<p>The product template, a <code>.yml</code> file in the tile&rsquo;s <code>metadata</code> subdirectory, includes or points to the following:</p>

<ul>
<li>Metadata: high level information about your tile</li>
<li>Dependencies: how to specify product dependencies</li>
<li>Property Blueprints: the building blocks of representing values</li>
<li>Form Types: exposing property blueprints into generated forms</li>
<li>Jobs</li>
</ul>

<h2><a id='top-level'></a> Top Level Properties</h2>

<p>The following is an example of the properties that appear at the top of a product template. Following this example are definitions of each property.</p>

<pre class="code">
  ---
  name: example-product
  product_version: &lt;%= version.inspect %>
  minimum_version_for_upgrade: "1.7.0"
  metadata_version: "1.11"
  label: 'Ops Manager: Example Product'
  description: An example product to demonstrate Ops Manager product-author features
  rank: 1
  service_broker: false # Default value
  stemcell_criteria:
    os: ubuntu-trusty
    version: &lt;%= stemcell_version.inspect %&gt;

    enable_patch_security_updates: true
  releases:
    - name: example-release
      file: &lt;%= release_file_name.inspect %&gt;
      version: &lt;%= release_file_name.match(/^example-release-(.*)\.tgz$/)[1].inspect %&gt;

  variables:
    - name: credhub-password
      type: password

  post_deploy_errands:
    - name: example-errand

  pre_delete_errands:
    - name: example-errand
</pre>

<h3><a id='top-name'></a> name</h3>

<p>String. Required.
The internal name of the product. You must keep the name of your product consistent for migrations to function properly.
Changing the name indicates the installation of a completely different product.</p>

<h3><a id='top-version'></a> product_version</h3>

<p>String. Required.
The version of the product. At present you can only import this version into Ops Manager once.
If you intend to import the same product / version, you must delete the existing one from the /metadata folder and delete the installation files from Ops Manager&rsquo;s disk.
The version number is important for <a href="/tiledev/tile-upgrades.html">migrations</a>.</p>

<h3>minimum_version_for_upgrade</h3>

<p>String. Optional. Pivotal recommends that you set a minimum version for upgrading to your current product version.
This example shows a current product version of v1.7 that only upgrades from a v1.6.x version of the same product:</p>
<pre class="highlight plaintext"><code>- product_version:  1.7.0.0
  minimum_version_for_upgrade:  1.6.0.0
</code></pre>

<h3><a id='top-metadata'></a> metadata_version</h3>

<p>String. Required.
The versioned structure of the product template (the file you are editing).
Changing the version number can unlock new properties, and also break properties that changed from previous versions.
The metadata version does not always correlate to Ops Manager version number and depends on what, or if, new metadata properties were introduced.</p>

<h3><a id='top-label'></a> label</h3>

<p>String. Optional.
The label that appears in the product tile when it displays in the Ops Manager Dashboard.</p>

<h3><a id='top-description'></a> description</h3>

<p>String. Optional.
A description of the product. This is not currently used but may be displayed in a future version of Ops Manager.</p>

<h3><a id='top-rank'></a> rank</h3>

<p>Integer. Required.
The order in which a product tile appears on the dashboard.
The Ops Manager Director always appears at rank 100.
For your product to appear to the right of Ops Manager Director (preferable)i, you must set this value to an integer less than 100.
Pivotal recommends that you set it to 1.
Ops Manager sorts tiles alphabetically if all tiles have the same rank.
This is a known weak point.</p>

<h3><a id='top-stemcell-criteria'></a> stemcell_criteria</h3>

<p>Hash. Required.
For a list of stemcells, including OS and version, see <a href="https://bosh.io/">the BOSH hub</a>.
You do not specify which IaaS the Stemcell targets.
This keeps your product template IaaS agnostic so that one product template can be deployed on any IaaS.
At the time of this writing, none of the BOSH stemcells require a Cloud Provider Interface (CPI). 
This is expected to change in a future release of BOSH. </p>

<p><code>enable_patch_security_updates</code> allows you to automatically use the latest patched version of a stemcell.
This is by default set to <code>true</code>. For products using static compilations, you can disable this feature.
If you set the property to <code>false</code>, your product does not receive security patches through automatic stemcell updates. </p>

<p><pre class="code">
 stemcell_criteria
  os: ubuntu-trusty
  version: &lt;%= stemcell_version.inspect %&gt;
  enable_patch_security_updates: true
 </pre></p>

<p>This feature increases security by automatically using the latest patched version of a stemcell.
However, operators may experience longer than expected upgrade times. 
For more information, see <a href="http://docs.pivotal.io/pivotalcf/customizing/understanding-stemcells.html">Understanding Floating Stemcells</a>.</p>

<h3><a id='top-release'></a> releases</h3>

<p>Array of Hashes. Required.
The list of releases contained in your product&rsquo;s releases directory.
The version of the release must be exactly the same as the version contained in the release (BOSH releases are versioned and signed by BOSH).</p>

<h3><a id='top-post-deploy'></a> post_deploy_errands</h3>

<p>Array of Hashes. Optional.
A list of errands that run after a deploy succeeds.</p>

<p>Set the <code>run_post_deploy_errand_default:</code> property to <code>on</code> or <code>off</code> to set the default for the errand&rsquo;s run rule selector in Ops Manager.
See <a href="/tiledev/tile-errands.html">Lifecycle Errands</a>. If this property is not supplied, the selector defaults to <code>On</code>.</p>

<h3><a id='top-pre-delete'></a> pre_delete_errands</h3>

<p>Array of Hashes. Optional.
A list of errands that run before a deployment is deleted.</p>

<p>Set the <code>run_pre_delete_errand_default:</code> property to <code>on</code> or <code>off</code> to set the default for the errand&rsquo;s run rule selector in Ops Manager.
See <a href="/tiledev/tile-errands.html">Lifecycle Errands</a>. If this property is not supplied, the selector defaults to <code>On</code>. </p>

<h2><a id='form-properties'></a> Form Properties</h2>

<p>The following is an example of the properties that appear in the <code>form_types</code> section of a product template.
These forms appear on the left hand side, as links, after a user clicks on the tile itself.</p>

<p>As shown in a later section, form properties reference <code>property_blueprints</code> for the definition of the type of data (URL, IP address, list, etc.) being saved.
Form properties are themselves referenced in the manifest section of the <code>job_types</code> section, which will also be explained later in this document.
The eventual purpose of these properties is to hydrate a BOSH manifest, which Ops Manager generates on the user&rsquo;s behalf.</p>

<p>Following this example are definitions of each property.</p>
<pre class="highlight plaintext"><code>form_types:
  - name: example-form
    label: Configurable Properties
    description: All the properties that you can configure!
    markdown: |
      ## I am markdown, hear me _roar_.

      ![Alt text](http://placekitten.com/g/400/200)

      Things to do:

      1. Learn [markdown](https://daringfireball.net/projects/markdown/).
      1. ...
      1. Profit!
    property_inputs:
      - reference: .web_server.example_string
        label: Example string
        description: 'Configure a property of type string'
      - reference: .web_server.example_string_with_placeholder
        label: Example string containing Placeholder text
        description: 'Optional field. Configuration not necessary'
        placeholder: 'Ghost text. Spooky!'
      - reference: .web_server.example_migrated_integer
        label: Example integer
        description: 'Configure a property of type integer'
      - reference: .web_server.example_boolean
        label: Example boolean
        description: 'Configure a property of type boolean'
      - reference: .web_server.example_dropdown
        label: Example dropdown
        description: 'Configure a property of type dropdown'
      - reference: .web_server.example_domain
        label: Example domain
        description: 'Configure a property of type domain'
      - reference: .web_server.example_wildcard_domain
        label: Example wildcard_domain
        description: 'Configure a property of type wildcard_domain'
      - reference: .web_server.example_string_list
        label: Example string_list
        description: 'Configure a property of type string_list'
      - reference: .web_server.example_text
        label: Example text
        description: 'Configure a property of type text (setting to "magic value" causes the web server job instance count to go to 0)'
      - reference: .web_server.example_ldap_url
        label: Example ldap_url
        description: 'Configure a property of type ldap_url'
      - reference: .web_server.example_email
        label: Example email
        description: 'Configure a property of type email'
      - reference: .web_server.example_http_url
        label: Example http_url
        description: 'Configure a property of type http_url'
      - reference: .web_server.example_ip_address
        label: Example ip_address
        description: 'Configure a property of type ip_address'
      - reference: .web_server.example_ip_ranges
        label: Example ip_ranges
        description: 'Configure a property of type ip_ranges'
      - reference: .web_server.example_multi_select_options
        label: Example multi_select_options
        description: 'Configure a property of type multi_select_options'
      - reference: .web_server.example_network_address_list
        label: Example network_address_list
        description: 'Configure a property of type network_address_list (this property was marked with freeze_on_deploy, and so will not be editable after changes are first applied)'
      - reference: .web_server.example_network_address
        label: Example network_address
        description: 'Configure a property of type network_address'
      - reference: .web_server.example_port
        label: Example port
        description: 'Configure a property of type port'
      - reference: .web_server.example_smtp_authentication
        label: Example smtp_authentication
        description: 'Configure a property of type smtp_authentication'
      - reference: .web_server.client_certificate
        label: Example certificate
        description: 'Configure a certificate'
</code></pre>

<h3><a id='form-name'></a> name</h3>

<p>String. Required.
The internal name of the form.</p>

<h3><a id='form-label'></a> label</h3>

<p>String. Required.
The label of the form as it appears as a link on the left hand side of each form.</p>

<h3><a id='form-description'></a> description</h3>

<p>String. Optional.
The description of the form. Appears at the top of the form as a header.</p>

<h3><a id='form-markdown'></a> markdown</h3>

<p>Markdown. Optional.
Provide a block of markdown to display at the top of the form. Includes image support.
You can use this property to document the tile and provide explanations or references.</p>

<h3><a id='form-property-inputs'></a> property_inputs</h3>

<p>Array of Hashes. Required.
References to properties defined in the property_blueprints section of the product template.</p>

<h3><a id='form-placeholder'></a> placeholder</h3>

<p>String. Optional. Specify placeholder text for a field.
The text appears in light gray to show an example value for the user.
The text disappears when the user types in the field and reappears if the user leaves the field empty.  </p>

<p>The <code>placeholder</code> attribute displays for the following form types:</p>

<ul>
<li>string</li>
<li>integer</li>
<li>domain</li>
<li>wildcard_domain</li>
<li>string_list</li>
<li>text</li>
<li>ldap_url</li>
<li>email</li>
<li>http_url</li>
<li>ip_address</li>
<li>ip_ranges</li>
<li>network_address_list</li>
<li>network_address</li>
<li>port</li>
</ul>

<h2><a id='simple-vs-complex'></a> Simple vs. Complex Inputs (Selectors and Collections)</h2>

<p>Most properties are simple values such as strings, integers, URL addresses, or IP addresses.
Others are complex, such as selectors or collections.</p>

<p>Selectors are a means of giving the user a choice of a set of inputs.
Collections are a means of giving the user the ability to enter an array of values to create a hash.</p>

<p>Selectors appear as follows:</p>

<p><img alt="Selector" src="img/selector.png" /></p>

<p>Collections appear as follows:</p>

<p><img alt="Collection" src="img/collection.png" /></p>

<p>For more information about specifying and rendering named manifests for collection, see <a href="#named-manifest">named_manifest</a>.</p>

<h2><a id='property-blueprints'></a> Property Blueprints</h2>

<p>The following is an example of the <code>property_blueprints</code> that appear in a product template.
These blueprints define anything that will eventually end up in the BOSH manifest generated by Ops Manager. </p>

<p>Note that one of these blueprints references a migrated value, which came from the Example Product v1.6 using <a href="/tiledev/tile-upgrades.html">migrations</a>.  </p>
<pre class="highlight plaintext"><code>property_blueprints:
  - name: example_selector
    type: selector
    configurable: true
    default: Pizza
    freeze_on_deploy: true
    option_templates:
      - name: pizza_option
        select_value: Pizza
        named_manifests:
          - name: my_snippet
            manifest: |
              pizza_toppings:
                pepperoni: (( .properties.example_selector.pizza_option.pepperoni.value ))
                pineapple: (( .properties.example_selector.pizza_option.pineapple.value ))
                other: (( .properties.example_selector.pizza_option.other_toppings.value ))
          - name: provides_section
            manifest: |
              as: 'pizza_link_web_server_job'
          - name: consumes_section
            manifest: |
              from: 'pizza_link_web_server_job'
        property_blueprints:
          - name: pepperoni
            type: boolean
            configurable: true
            freeze_on_deploy: true
          - name: pineapple
            type: boolean
            configurable: true
            default: true
          - name: other_toppings
            type: string
            configurable: true
            optional: true
            constraints:
            - must_match_regex: '\A[^!@#$%^&amp;*()]*\z'
              error_message: 'This name cannot contain special characters.'
      - name: filet_mignon_option
        select_value: Filet Mignon
        named_manifests:
          - name: my_snippet
            manifest: |
              rarity: (( .properties.example_selector.filet_mignon_option.rarity_dropdown.value ))
              review: (( .properties.example_selector.filet_mignon_option.review.value ))
              secret_sauce: (( .properties.example_selector.filet_mignon_option.secret_sauce.value ))
          - name: provides_section
            manifest: |
              as: 'filet_mignon_link_web_server_job'
          - name: consumes_section
            manifest: |
              from: 'filet_mignon_link_web_server_job'
        property_blueprints:
          - name: rarity_dropdown
            type: dropdown_select
            configurable: true
            default: rare
            options:
              - name: rare
                label: 'Rare'
              - name: medium
                label: 'Medium'
              - name: well-done
                label: 'Well done'
</code></pre>

<h3>configurable</h3>

<p>No property will be viewable in a form if unless <code>configurable</code> is set to <code>true</code>.
Rather than giving the user the ability to enter a value, the value is generated by Ops Manager.</p>

<h3>must_match_regex</h3>

<p>Regular Expression. Optional. Create a validator that runs on the form save event.
If the user input does not match the <code>must_match_regex</code> constraint, the form displays the specified <code>error_message</code>.
Multiple <code>must_match_regex</code> constraints for a single property blueprint are evaluated in the order listed. </p>

<h2><a id='configurable-props'></a> Configurable Properties</h2>

<p>Many of these properties are strings, but can be used with validators in order to check that the user typed in the correct format for a URL, IP, address, domain, etc.</p>

<h3><a id='configurable-string'></a> string</h3>

<p>A string.</p>

<h3><a id='configurable-integer'></a> integer</h3>

<p>An integer.</p>

<h3><a id='configurable-boolean'></a> boolean</h3>

<p>A boolean. Viewed as a checkbox.</p>

<h3><a id='configurable-dropdown'></a> dropdown_select</h3>

<p>A list of options. The user chooses one viewed as an HTML select box.</p>

<h3><a id='configurable-multiselect'></a> multi_select_options</h3>

<p>A list of options. The user chooses zero or more, viewed as HTML checkboxes.</p>

<h3><a id='configurable-domain'></a> domain</h3>

<p>A second, third, fourth, etc level domain.</p>

<h3><a id='configurable-wildcard-domain'></a> wildcard_domain</h3>

<p>A domain with a wildcard in front of it. Example: <code>*.domain.com</code></p>

<h3><a id='configurable-text'></a> text</h3>

<p>A string. Appears as an HTML textarea.</p>

<h3><a id='configurable-ldap-url'></a> ldap_url</h3>

<p>A URL prefaced by <code>ldap://</code>.</p>

<h3><a id='configurable-email'></a> email</h3>

<p>An email address.</p>

<h3><a id='configurable-ips'></a> ip_ranges</h3>

<p>A range of IP addresses, with dashes and commas allowed. Example: <code>1.1.1.1-1.1.1.4,2.2.2.1-2.2.2.4</code></p>

<h3><a id='configurable-port'></a> port</h3>

<p>An integer representing a network port.</p>

<h3><a id='configurable-address'></a> network_address</h3>

<p>A single IP address or domain. Example: <code>1.1.1.1</code></p>

<h3><a id='configurable-address-list'></a> network_address_list</h3>

<p>A list of IP addresses or domains. Example: <code>1.1.1.1,example.com,2.2.2.2</code></p>

<h3><a id='generated'></a> Generated Properties (can also be configurable)</h3>

<p>The following properties are configurable, but can also be generated by Ops Manager if configurable is false or the configurable key is omitted.
The exceptions are the uuid and salted credentials properties, which are never configurable.</p>

<h3><a id='generated-cert-creds'></a> rsa_cert_credentials</h3>

<p>An RSA certificate.</p>

<h3><a id='generated-pkey-creds'></a> rsa_pkey_credentials</h3>

<p>An RSA private key.</p>

<h3><a id='generated-salted-creds'></a> salted_credentials</h3>

<p>Username and password created using a non-reversible hash algorithm.</p>

<h3><a id='generated-simple-creds'></a> simple_credentials</h3>

<p>Username and password.</p>

<h3><a id='generated-secret'></a> secret</h3>

<p>A random string or password.</p>

<h3><a id='generated-uuid'></a> uuid</h3>

<p>A universal unique identifier.</p>

<h3><a id='complex'></a> Complex Properties (Selectors and Collections)</h3>

<p>The selector and collections inputs are referenced by their selector and collection property blueprints.
These are more complicated than simple properties in that they contain manifest snippets, which are further referenced in other manifest snippets.
We will learn about manifest snippets in the next section.</p>

<h2><a id='job-types'></a> Job Types</h2>

<p>The following is an example of the <code>job_types</code> section that appears in a product template.
This section defines the jobs that end up in a BOSH manifest.
Those jobs are defined in your BOSH release.
Jobs require many different settings in order to function properly, and that is the crux of what Ops Manager does for you:
it asks a user for values to those settings and generates a manifest based on what was entered.</p>

<p>Ops Manager does not require product authors to provide <code>vm_credentials</code> in the <code>property_blueprints</code> for each <code>job_type</code>. This is because <code>vm_credentials</code> are generated automatically,
and you can find them in the release manifest. </p>
<pre class="highlight plaintext"><code>job_types:
  - name: web_server
    resource_label: Web Server
    templates:
      - name: web_server
        release: example-release
      - name: time_logger
        release: example-release
    release: example-release
    static_ip: 1
    dynamic_ip: 0
    max_in_flight: 1
    single_az_only: true
    instance_definition:
      name: instances
      type: integer
      configurable: true
      default: 1
      constraints:
        max: 1
      zero_if:
        property_reference: '.web_server.example_text'
        property_value: 'magic value'
    resource_definitions:
      - name: ram
        type: integer
        configurable: true
        default: 1024
      - name: ephemeral_disk
        type: integer
        configurable: true
        default: 2048
      - name: persistent_disk
        type: integer
        configurable: true
        default: 1024
        constraints:
          min: 1024
      - name: cpu
        type: integer
        configurable: true
        default: 1
    property_blueprints:
    - name: static_ips
      type: ip_ranges
      configurable: true
      optional: true
    - name: generated_rsa_cert_credentials
      type: rsa_cert_credentials
    - name: generated_rsa_pkey_credentials
      type: rsa_pkey_credentials
    - name: generated_salted_credentials
      type: salted_credentials
    - name: generated_simple_credentials
      type: simple_credentials
    - name: generated_secret
      type: secret
    - name: generated_uuid
      type: uuid
    - name: example_string_with_placeholder
      type: string
      configurable: true
      optional: true
      placeholder: 'Configure me!'
    - name: example_string
      type: string
      configurable: true
      default: 'Hello world'
      constraints:
      - must_match_regex: '^[^!@#$%^&amp;*()]*$'
        error_message: 'This name cannot contain capital digits.'
      - must_match_regex: '^[^0-9]*$'
        error_message: 'This name cannot contain digits.'
    - name: example_migrated_integer
      type: integer
      configurable: true
      default: 1
    - name: example_boolean
      type: boolean
      configurable: true
      default: true
    - name: example_dropdown
      type: dropdown_select
      configurable: true
      default: kiwi
      options:
        - name: kiwi
          label: 'label for kiwi'
        - name: lime
          label: 'label for lime'
        - name: avocado
          label: 'label for avocado'
    - name: example_domain
      type: domain
      configurable: true
      default: www.example.com
    - name: example_wildcard_domain
      type: wildcard_domain
      configurable: true
      default: 'example.com'
    - name: example_string_list
      type: string_list
      configurable: true
      default: 'a,list,of,strings'
    - name: example_text
      type: text
      configurable: true
      default: 'some_text'
    - name: example_ldap_url
      type: ldap_url
      configurable: true
      default: 'ldap://example.com'
    - name: example_email
      type: email
      configurable: true
      default: foo@example.com
    - name: example_http_url
      type: http_url
      configurable: true
      default: 'http://www.example.com'
    - name: example_ip_address
      type: ip_address
      configurable: true
      default: '192.168.0.1'
    - name: example_ip_ranges
      type: ip_ranges
      configurable: true
      default: '1.1.1.1-1.1.1.4,2.2.2.1-2.2.2.4'
    - name: example_multi_select_options
      type: multi_select_options
      configurable: true
      default: ['earth', 'jupiter']
      options:
        - name: mercury
          label: 'label for mercury'
        - name: venus
          label: 'label for venus'
        - name: earth
          label: 'label for earth'
        - name: mars
          label: 'label for mars'
        - name: jupiter
          label: 'label for jupiter'
        - name: saturn
          label: 'label for saturn'
        - name: uranus
          label: 'label for uranus'
        - name: neptune
          label: 'label for neptune'
    - name: example_network_address_list
      type: network_address_list
      configurable: true
      default: '1.1.1.1,example.com,foo.bar.example.com'
    - name: example_network_address
      type: network_address
      configurable: true
      default: '1.1.1.1'
    - name: example_port
      type: port
      configurable: true
      default: 1111
    - name: example_smtp_authentication
      type: smtp_authentication
      configurable: true
      default: plain
    - name: client_certificate
      type: ca_certificate
      configurable: true
      optional: true
    manifest: |
      generated:
        root_rsa_certificate: (( $ops_manager.ca_certificate ))
        rsa_cert_credentials:
          public_key_pem: (( generated_rsa_cert_credentials.public_key_pem ))
          cert_and_private_key_pems: (( generated_rsa_cert_credentials.cert_and_private_key_pems ))
        rsa_pkey_credentials:
          public_key_pem: (( generated_rsa_pkey_credentials.public_key_pem ))
          private_key_pem: (( generated_rsa_pkey_credentials.private_key_pem ))
          public_key_openssh: (( generated_rsa_pkey_credentials.public_key_openssh ))
          public_key_fingerprint: (( generated_rsa_pkey_credentials.public_key_fingerprint ))
        salted_credentials:
          sha512_hashed_password: (( generated_salted_credentials.sha512_hashed_password ))
          identity: (( generated_salted_credentials.identity ))
          salt: (( generated_salted_credentials.salt ))
          password: (( generated_salted_credentials.password ))
        simple_credentials:
          identity: (( generated_simple_credentials.identity ))
          password: (( generated_simple_credentials.password ))
        secret: (( generated_secret.value ))
        uuid: (( generated_uuid.value ))
      configured:
        string: (( example_string.value ))
        integer: (( example_migrated_integer.value ))
        ...
        record_collection: (( .properties.example_collection.value || [] ))
        selector: (( .properties.example_selector.selected_option.parsed_manifest(my_snippet) ))
      ops_manager_provided_accessors:
        name: (( name ))
        ram: (( ram ))
        ephemeral_disk: (( ephemeral_disk ))
        persistent_disk: (( persistent_disk ))
        instances: (( instances ))
        availability_zone: (( availability_zone ))
        first_ip: (( first_ip ))
        ips: (( ips ))
        ips_by_availability_zone: (( ips_by_availability_zone ))
        bosh_job_partition_stats: (( bosh_job_partition_stats ))
</code></pre>

<h3><a id='job-name'></a> name</h3>

<p>String. Required.
The name of the job as it will be created in the Ops Manager generated BOSH manifest.</p>

<h3><a id='job-label'></a> resource_label</h3>

<p>String. Required.
The label of the job as it will appear in the resources page of the tile.</p>

<h3><a id='job-template'></a> templates</h3>

<p>Array of Hashes. Required.
Each element has the following fields:</p>

<h4><a id='template-name'></a> name</h4>

<p>The name of the job template to use. Required.</p>

<h4><a id='template-release'></a> release</h4>

<p>The name of the release the template is from. Required.</p>

<h4><a id='template-consumes'></a> consumes</h4>

<p>A YAML string defining <a href="https://bosh.io/docs/links.html">BOSH links</a> this job consumes. Optional.</p>

<h4><a id='template-provides'></a> provides</h4>

<p>A YAML string defining <a href="https://bosh.io/docs/links.html">BOSH links</a> this job provides. Optional.</p>

<p>This is a BOSH feature (creating jobs from different releases). See the <a href="https://bosh.io/">BOSH documentation</a> for more information.</p>

<h3><a id='job-release'></a> release</h3>

<p>String. Required.
The name of the BOSH release contained in your product archive (.pivotal file).</p>

<h3><a id='job-static-ip'></a> static_ip</h3>

<p>Boolean. Required.
Sets whether the BOSH job should have a static or dynamic IP.
Static IPs are set by the user, and reserved, while Dynamic IPs are set by BOSH. Both are, in effect, static, in that they should not change between deployments.</p>

<h3><a id='job-dynamic-ip'></a> dynamic_ip</h3>

<p>Boolean. Required.
Set the opposite of <code>static_ip</code>. This will eventually be eliminated as a property as it is obviously redundant and unnecessary.</p>

<h3><a id='job-single-az'></a> single_az_only</h3>

<p>Boolean. Required.
You can give users control of balancing jobs across availability zones (AZs) by setting <code>single_az_only</code> to <code>false</code>.
To limit a job to a single AZ, set this to <code>true</code>. </p>

<h3><a id='job-max-in-flight'></a> max_in_flight</h3>

<p>Integer. Required.
A BOSH setting that controls the number of instances of this job that BOSH will deploy in parallel.</p>

<h3><a id='job-resource-def'></a> resource_definition</h3>

<p>Array of Hashes. Required.
A set of resource settings for the job along with max and min constraints, defaults,
and whether or not the user can configure (change) the setting.
The resources that can be set are:</p>

<ul>
<li>ram</li>
<li>ephemeral_disk</li>
<li>persistent_disk</li>
<li>cpu</li>
</ul>

<p class="note"><strong>Note: </strong>If you set the <code>default</code> property for <code>persistent_disk</code> to <code>0</code>,
users cannot edit this value and the <strong>Resource Config</strong> page in <strong>Ops Mananger</strong> displays <strong>None</strong> under the persistent disk field.</p>

<h3><a id='job-instance-def'></a> instance_definition</h3>

<p>Hash. Required.
The number of default instances for a job along with max, min, odd, and the ability to decrease sizing after deploy constraints.</p>

<p>If your product uses an external service that performs the same job as a service in Elastic Runtime,
you can reduce resource usage by setting the instance count of a job to <code>0</code> with the <code>zero_if</code> property.
For example, your product uses Amazon Relational Database Service (RDS) instead of MySQL, which is the default system database for Elastic Runtime.
Set <code>property reference</code> to <code>.properties.system.database</code> and <code>property value</code> to <code>magic value</code> to change the instance counts of all MySQL jobs to <code>0</code>. </p>

<h3><a id='job-manifest'></a> manifest</h3>

<p>Text snippet, prefaced by pipe symbol: <code>|</code>. Optional.
Ops Manager generates a BOSH manifest that defines properties for each job that the manifest deploys.
Some of these properties are not set until the user clicks <strong>Apply Changes</strong>, because the user configures them in the tile or because Ops Manager has to generate them.</p>

<p>To include these properties in a manifest snippet, use &ldquo;double-parens&rdquo; syntax, which consists of a variable name surrounded by two sets of parentheses:</p>
<pre class="highlight plaintext"><code>    manifest: |
      pizza_toppings:
        pepperoni: (( .properties.example_selector.pizza_option.pepperoni.value ))
</code></pre>

<p>When Ops Manager parses a product template and BOSH parses a manifest,
they both fill in properties designated by double-parens syntax.
Some property values in a product template, such as CredHub credentials, must be filled in by BOSH on the BOSH Director VM, rather than by Ops Manager.
To include these BOSH deploy-time properties in a manifest snippet, use &ldquo;triple-parens&rdquo; notation:</p>
<pre class="highlight plaintext"><code>    manifest: |
      credhub:
        concatenated_password: prefix-((( credhub-password )))-suffix
        password: ((( credhub-password )))

</code></pre>

<p>Ops Manager strips the outer parentheses from these expressions and
includes the resulting double-parens expressions in the manifest it generates, for BOSH to evaluate at deploy time.</p>

<h3><a id='named-manifest'></a> named_manifest</h3>

<p class="note"><strong>Note</strong>: Ops Manager 2.0 and later supports specifying and rendering named manifests in a collection property.</p>

<p>Specify a collection property in a product&rsquo;s metadata such as:</p>
<pre class="highlight yaml"><code>  <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">certificate_collection</span>
    <span class="s">type</span><span class="pi">:</span> <span class="s">collection</span>
    <span class="s">configurable</span><span class="pi">:</span> <span class="s">true</span>
    <span class="s">property_blueprints</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">some_cert_name</span>
        <span class="s">type</span><span class="pi">:</span> <span class="s">string</span>
      <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">some_cert</span>
        <span class="s">type</span><span class="pi">:</span> <span class="s">rsa_cert_credentials</span>
    <span class="s">named_manifests</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">for_routing</span>
      <span class="s">manifest</span><span class="pi">:</span> <span class="pi">|</span>
        <span class="no">name:  (( current_record.some_cert_name.value ))</span>
        <span class="no">private_key:  (( current_record.some_cert.private_key_pem ))</span>
        <span class="no">public_key:  (( current_record.some_cert.public_key_pem ))</span>
        <span class="no">certificate: (( current_record.some_cert.cert_pem ))</span>
</code></pre>

<p>Specify a manifest snippet containing:</p>
<pre class="highlight plaintext"><code>routing_certificates: (( .properties.certificate_collection.parsed_manifest(for_routing) ))
</code></pre>

<p>The operator will then add the certificates to <code>certificate_collection</code>.</p>

<p>Inspect the manifests in <code>/debug/files</code>. You will see the following rendered in your manifest:</p>
<pre class="highlight plaintext"><code>routing_certificates:
  - name: foo_cert
    private_key: PRIVATE-KEY
    public_key: PUBLIC-KEY
    certificate: CERTIFICATE
  - name: bar_cert
    private_key: PRIVATE-KEY
    public_key: PUBLIC-KEY
    certificate: CERTIFICATE
</code></pre>

<p class="note"><strong>Note:</strong> <code>current_record</code> should only refer to this property when it is a single collection record referring to its other properties. If you create a property with the name <code>current_record</code>, it will not work.</p>

<h3><a id='selector-snippets'></a> Selector Manifest Snippets</h3>

<p>Selector snippets are evaluated twice. As you saw in the <code>property_blueprint</code>,
the selector has a manifest snippet for both sets of inputs that the user might choose.
Only one of these sets is evaluated and inserted into the job&rsquo;s manifest.</p>

<h3><a id='ops-man-snippets'></a> Ops Manager Provided Snippets</h3>

<p>The following double-parens accessors retrieve your job properties:</p>

<ul>
<li>name: <code>(( name ))</code></li>
<li>ips: <code>(( ips ))</code></li>
<li>ram: <code>(( ram ))</code></li>
<li>ephemeral_disk: <code>(( ephemeral_disk ))</code></li>
<li>persistent_disk: <code>(( persistent_disk ))</code></li>
<li>ips_by_availability_zone: <code>(( ips_by_availability_zone ))</code> (deprecated)</li>
<li>instances: <code>(( instances ))</code></li>
<li>availability_zone: <code>(( availability_zone ))</code> (deprecated)</li>
<li>bosh_job_partition_stats: <code>(( bosh_job_partition_stats ))</code> (deprecated)</li>
<li>first_ip: <code>(( first_ip ))</code> (deprecated)</li>
<li>first_network_deprecated: <code>(( first_network_deprecated ))</code> (deprecated)</li>
<li>subnet_cidrs: <code>(( subnet_cidrs ))</code></li>
</ul>

<p>The following is a list of all typed values with the accessor &ldquo;value&rdquo;:</p>

<ul>
<li>collection</li>
<li>ldap_url</li>
<li>domain</li>
<li>wildcard_domain</li>
<li>ip_ranges</li>
<li>ip_address</li>
<li>email</li>
<li>port</li>
<li>integer</li>
<li>string</li>
<li>boolean</li>
<li>text</li>
<li>smtp_authentication</li>
<li>network_address</li>
<li>network_address_list</li>
<li>string_list</li>
<li>ca_certificate</li>
<li>multi_select_options</li>
<li>dropdown_select</li>
<li>vm_type_dropdown</li>
<li>disk_type_dropdown</li>
<li>uuid</li>
<li>service_network_az_multi_select</li>
<li>service_network_az_single_select</li>
<li>secret</li>
</ul>

<p>The following list shows typed values with multiple accessors:</p>

<ul>
<li>simple_credentials: identity, password</li>
<li>rsa_cert_credentials: private_key_pem, cert_pem, public_key_pem, cert_and_private_key_pems<br></li>
<li>rsa_pkey_credentials: private_key_pem, public_key_pem, public_key_openssh, public_key_fingerprint</li>
<li>salted_credentials: salt, identity, password</li>
<li>selector: value, selected_option, nested context</li>
</ul>

<p>In addition, Ops Manager supports accessors that are global to the entire installation rather than job specific. </p>

<ul>
<li>$opsmanager.ca_certificate: The internal SSL CA certificate used to sign all SSL certificates generated by this Ops Manager instance, such as when the user clicks a <strong>Generate Self-Signed RSA Certificate</strong> link</li>
<li> $opsmanager.trusted_certificates</li>
<li> $opsmanager.http_proxy</li>
<li> $opsmanager.https_proxy<br></li>
<li> $opsmanager.no_proxy</li>
<li> $director.deployment_ip</li>
<li> $director.hostname</li>
<li> $director.username </li>
<li> $director.password </li>
<li> $director.ntp_servers</li>
<li> $director.ca_public_key</li>
<li> $self.uaa_client_name</li>
<li> $self.uaa_client_secret</li>
<li> $self.service_network</li>
<li> $self.stemcell_version</li>
<li>..PRODUCT-NAME.properties</li>
<li>..PRODUCT-NAME.deployment_name</li>
</ul>

        <div><a id='repo-link' href='http://github.com/pivotal-cf/docs-tiledev/tree/master/product-template-reference.html.md.erb'>View the source for this page in GitHub</a></div>

      </main>
    </div>
  </div>
</div>

<div id="scrim"></div>

<div class="container">
  <footer class="site-footer-links">
    <div class="copyright">
  <a href='https://pivotal.io/privacy-policy'>Privacy Policy</a> | 
  <a href='https://pivotal.io/terms-of-use'>Terms of Use</a><br/>
  <a href='/'>Pivotal Documentation</a>
  &copy; 2017 <a href='https://pivotal.io'>Pivotal Software</a>, Inc. All Rights Reserved.
</div>
<div class="support">
  Need help? <a href="" target="_blank">Visit Support</a>
</div>

  </footer>
</div><!--end of container-->

</body>
</html>
