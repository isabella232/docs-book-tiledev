<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,400italic,400,600' rel='stylesheet' type='text/css'>
  <!-- Use title if it's in the page YAML frontmatter -->
  <title>
      Managing Runtime Configs |
    
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/stylesheets/all.css" rel="stylesheet" media="screen, print" />
  <link href="/stylesheets/print.css" rel="stylesheet" media="print" />
  <link href='/images/favicon.ico' rel='shortcut icon'>

  <script src="/javascripts/all.js"></script>
  
<script type="text/javascript">
  if (window.location.host === 'docs.pivotal.io') {
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', '']);
    _gaq.push(['_setDomainName', '']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ga, s);
    })();
  }
</script>

<script type="text/javascript">
  var blackList = ['acceptance'];

  blackList.forEach(function(blackListedEnv) {
    if (document.URL.indexOf(blackListedEnv) > -1 && blackListedEnv != "") {
      $('head').append('<meta name="hashtag" content="PivotalMoment">');
    }
  });
</script>

<!-- CrazyEgg Tracking Script -->
  <script type="text/javascript">
  setTimeout(function(){var a=document.createElement("script");
  var b=document.getElementsByTagName("script")[0];
  a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0055/2990.js?"+Math.floor(new Date().getTime()/3600000);
  a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
  </script>

<!-- Munchkin Marketo Script -->
<script type="text/javascript">
  (function() {
    var didInit = false;

    function initMunchkin() {
      if (didInit === false) {
        didInit = true;
        Munchkin.init('625-IUJ-009');
      }
    }

    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
    s.onreadystatechange = function() {
      if (this.readyState == 'complete' || this.readyState == 'loaded') {
        initMunchkin();
      }
    };
    s.onload = initMunchkin;
    document.getElementsByTagName('head')[0].appendChild(s);
  })();
</script>

</head>

<body class="tiledev tiledev_runtime-config has-subnav">

<div class="viewport">
  <div class='wrap'>
    <script type="text/javascript">
      document.domain = "";
    </script>

       
    <header class="header header-layout">
      <h1 class="logo">
        <a href="/">Default Book Title</a>
      </h1>
      
      <div class="header-links js-bar-links">
        <div class="btn-menu" data-behavior="MenuMobile"></div>
        
        <div class="header-item">
          
        </div>
        <!--Default search-->
<!--If book needs something different, add a book-search partial to the book's layouts folder-->
<div class="header-item searchbar js-searchbar">
  <a class="search-icon" data-behavior="Search"></a>
  <div class="search-input">
    <div class="search-input-inner" id="docs-search">
        <form method="get" action="/search">
          <input name="q" placeholder="search" class="search-box" />
        </form>
    </div>
  </div>
</div>

      </div>
    </header>



    <div class="container">

      <!--googleoff: index-->
      <div id="sub-nav" class="js-sidenav nav-container" role="navigation">
  <a class="sidenav-title" data-behavior="SubMenuMobile">
    Doc Index
  </a>
  <div class="nav-content">
    <ul>

      <li>
        <a href="index.html">PCF Tile Developers Guide</a>
      </li>

      <li class="has_submenu">
        <a href="tile-basics.html">Tile Basics</a>
        <ul>
          <li>
            <a href="cf-concepts.html">How PCF and PCF Services Work</a>
          </li>
          <li>
            <a href="/tiledev/tile-structure.html">How Tiles Work</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu">
        <a href="/tiledev/workflow.html">Tile Development Workflow</a>
        <ul>
          <li>
            <a href="/tiledev/overview.html">Service Integration Overview</a>
          </li>
          <li>
            <a href="/tiledev/stages.html">Levels of Integration</a>
          </li>
          <li>
            <a href="/tiledev/development.html">Development Steps at Each Level</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu">
        <a href="/tiledev/environments.html">Development Environments</a>
        <ul>
          <li>
            <a href="/tiledev/environments.html#pcfdev">PCF Dev and BOSH Lite</a>
          </li>
          <li>
            <a href="/tiledev/environments.html#pws">PWS or Other Supported CF Infrastructure</a>
          </li>
          <li>
            <a href="/tiledev/environments.html#pcf">PCF with Ops Manager</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu">
        <a href="/tiledev/tools.html">Development Tools</a>
        <ul>
          <li>
            <a href="/tiledev/tile-generator.html">Tile Generator</a>
          </li>
          <li>
            <a href="/tiledev/pcf-command.html">pcf Command Line Utility</a>
          </li>
          <li>
            <a href="/tiledev/concourse.html">Concourse CI</a>
          </li>
          <li>
            <a href="/tiledev/sdk.html">Services SDK</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu expanded">
        <a href="/tiledev/roadmap.html">Service Development Roadmap</a>
        <ul>
          <li>
            <a href="/tiledev/roadmap.html#user-provided">Level 1: User-Provided Service</a>
          </li>
          <li class="has_submenu">
            <a href="/tiledev/brokered.html">Level 2: Brokered Service</a>
            <ul>
              <li>
                <a href="/tiledev/service-brokers.html">Service Broker</a>
              </li>
            </ul>
           </li> 
          <li class="has_submenu">
            <a href="/tiledev/managed.html">Level 3: Managed Service</a>
            <ul>
              <li>
                <a href="/tiledev/bosh-release.html">BOSH Releases</a>
              </li>
              <li>
                <a href="/tiledev/tile-errands.html">Errands</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="/tiledev/on-demand.html">Level 4: On-Demand Service</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu">
        <a href="/tiledev/other-integrations.html">Other Integrations</a>
        <ul>
          <li>
            <a href="/tiledev/bbr-devguide.html">BOSH Backup and Restore</a>
          </li>
          <li>
            <a href="/tiledev/buildpacks.html">Buildpacks</a>
          </li>
          <li class="has_submenu">
            <a href="/tiledev/credhub.html">CredHub</a>
            <ul>
              <li>
                <a href="/tiledev/create-credhub-vars.html">Creating New Variables in CredHub</a>
              </li>
              <li>
                <a href="/tiledev/migrating-credhub-credentials.html">Migrating Existing Credentials to CredHub</a>
              </li>
              <li>
                <a href="/tiledev/get-credhub-vars.html">Fetching Variable Names and Values</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="/tiledev/embedded-agents.html">Embedded Agents</a>
          </li>
          <li>
            <a href="/tiledev/nozzle.html">Logs, Metrics, and Nozzles</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="/tiledev/tile-documentation.html">Documentation</a>
      </li>

      <li class="has_submenu">
        <a href="/tiledev/publish.html">Publish and Update</a>
        <ul>
          <li>
            <a href="/tiledev/tile-upgrades.html">Tile Upgrades</a>
          </li>
          <li>
            <a href="/tiledev/releases.html">Partner Software Product Release Cycle</a>
          </li>
        </ul>
      </li>


      <li class="has_submenu">
        <a href="/tiledev/reference.html">Reference</a>
        <ul>
          <li>
            <a href="/tiledev/product-template-reference.html">Product Template Reference</a>
          </li>
          <li>
            <a href="/tiledev/property-reference.html">Property Reference</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu">
        <a href="/tiledev/release-notes.html">Partners Release Notices</a>
        <ul>
          <li>
            <a href="/tiledev/release-notes-1-12.html">PCF v1.12 Partners Release Notice</a>
          </li>
          <li>
            <a href="/tiledev/release-notes-1-11.html">PCF v1.11 Partners Release Notice</a>
          </li>
          <li>
            <a href="/tiledev/release-notes-1-10.html">PCF v1.10 Partners Release Notice</a>
          </li>
          <li>
            <a href="/tiledev/release-notes-1-9.html">PCF v1.9 Partners Release Notice</a>
          </li>
          <li>
            <a href="/tiledev/release-notes-1-8.html">PCF v1.8 Partners Release Notice</a>
          </li>
          <li>
            <a href="/tiledev/release-notes-1-7.html">PCF v1.7 Partners Release Notice</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="/tiledev/contacts.html">Contact Us</a>
      </li>

    </ul>
  </div>
</div><!--end of sub-nav-->

      <!--googleon: index-->

      <main class="content content-layout" id="js-content" role="main">
        <a id="top"></a>
        
          <h1 class="title-container" >
    Managing Runtime Configs
  </h1>

          <div id="js-quick-links" >
            <div class="quick-links"><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#create">Create a Runtime Config</a></li>
<li><a href="#delete">Delete a Runtime Config</a></li>
<li>
<a href="#config-only">Create a Runtime Config-Only Tile</a><ul><li><a href="#example">Example Runtime Config-Only Tile</a></li></ul>
</li>
</ul></div>
          </div>
        <div class="to-top" id="js-to-top">
          <a href="#top" title="back to top"></a>
        </div>
        <p class="note"><strong>Note</strong>: Ops Manager 2.0 Alpha introduces support for runtime configs.</p>

<p>This topic explains how to define and manage named runtime configs with your service tile for Pivotal Cloud Foundry (PCF).</p>

<p>Tile authors can <a href="#create">create a new runtime config</a> in an existing product tile, <a href="#delete">delete a runtime config</a> from a tile, or add a tile that contains a <a href="#config-only">runtime config only</a>.</p>

<p>See the <a href="https://bosh.io/docs/runtime-config.html">BOSH documentation</a> for more information about runtime configs.</p>

<h2><a id="overview"></a>Overview</h2>

<p>A runtime config is a section of the tile metadata that can define global deployment configurations. When a tile author includes a runtime config as a top-level key in the tile metadata, BOSH applies the runtime config to every VM in the deployment.</p>

<p>To the operator, a runtime config appears in Ops Manager as a tile with minimal configuration options. Runtime config tiles contain no stemcell, network, availability zone (AZ), or resource config information.</p>

<p><img alt="Runtime Config Tile on the Ops Manager Installation Dashboard" src="img/runtime-config-dashboard.png" /></p>

<p>When you click <strong>Apply Changes</strong>, Ops Manager combines the runtime config information from every tile in the deployment and assigns each named runtime config a unique identifier. Ops Manager creates the name using the tile name, a generated GUID, and the runtime config name defined in the metadata in the following format:</p>
<pre class="highlight plaintext"><code>TILE_NAME-GUID-RUNTIME_CONFIG_NAME
</code></pre>

<h2><a id="create"></a>Create a Runtime Config</h2>

<p>Tile authors can add <code>runtime_configs</code> as a top-level key in tile metadata. In this key, the tile author defines configuration properties that Ops Manager applies to all deployments. A tile can support any number of runtime configs.</p>

<p>A named runtime config, such as <code>MY-RUNTIME-CONFIG</code> in the example below, can contain any number of addons. Each addon can contain any number of jobs.</p>

<p>To add a runtime config to a tile, add the following section to the tile metadata:</p>
<pre class="highlight plaintext"><code>runtime_configs:
  - name: MY-RUNTIME-CONFIG
    runtime_config: |
      releases:
      - name: os-conf
        version: 15
      addons:
      - name: MY-ADDON-NAME
        jobs:
        - name: MY-RUNTIME-CONFIG-JOB
          release: os-conf
        properties:
          MY-ADDON-NAME:
        ...
</code></pre>

<p>Replace the text in the example above with the following:</p>

<ul>
<li><code>MY-RUNTIME-CONFIG</code>: Choose a name for the runtime config.</li>
<li><code>MY-ADDON-NAME</code>: Choose a name for the addon that contains the runtime config job.</li>
<li><code>MY-RUNTIME-CONFIG-JOB</code>: Choose a name for the job the runtime config describes.</li>
</ul>

<p class="note important"><strong>Important</strong>: The names you choose must be unique across a deployment. Pivotal recommends appending your product name or another unique identifier to each of the named items in the <code>runtime_configs</code> section.</p>

<p>Define the runtime config job properties in the <code>properties</code> section.</p>

<h2><a id="delete"></a>Delete a Runtime Config</h2>

<p>Tile authors can remove an existing runtime config from a tile by uploading a blank runtime config in its place. Remove the configuration for the named runtime config from the tile metadata, leaving the name in place.</p>

<p>The following example deletes <code>example-runtime-config</code>:</p>
<pre class="highlight plaintext"><code>runtime_configs:
  - name: example-runtime-config
    runtime_config:
</code></pre>

<h2><a id="config-only"></a>Create a Runtime Config-Only Tile</h2>

<p>Tile authors can create a tile that only contains a runtime config. The only release that a tile author must include in a runtime config tile is <code>os-conf</code>. When creating a runtime config-only tile, a tile author is not required to define the following top-level keys:</p>

<ul>
<li><code>post_deploy_errands</code></li>
<li><code>pre_delete_errands</code></li>
<li><code>job_types</code></li>
</ul>

<h3><a id="example"></a>Example Runtime Config-Only Tile</h3>

<p>The following example shows a runtime config-only tile with minimal configuration:</p>
<pre class="highlight plaintext"><code>---
name: runtime-config-only-example-product
product_version: "3.4"
minimum_version_for_upgrade: "2.0"
metadata_version: "2.0"
label: 'Runtime Config Only Example Product'
description: An example product to demonstrate runtime config features
rank: 1
service_broker: false # Default value
stemcell_criteria:
  os: ubuntu-trusty
  version: STEMCELL-VERSION

releases:
  - name: os-conf
    file: os-conf
    version: '15'

post_deploy_errands: []

pre_delete_errands: []

form_types:
  - name: example_form
    label: 'Example form'
    description: 'An example form'
    property_inputs:
      - reference: .properties.example_string
        label: 'Example string'

property_blueprints:
  - name: example_string
    type: string
    configurable: true
    default: Pizza

job_types: []

runtime_configs:
  - name: example-runtime-config
    runtime_config: |
      releases:
      - name: os-conf
        version: 15
      addons:
      - name: login
        jobs:
        - name: login-banner
          release: os-conf
        properties:
          login_banner:
            text: |
              (( .properties.example_string.value )).
</code></pre>

<p>In the example runtime config above, the <code>login-banner</code> job prints a banner when a user logs into any VM in the deployment. The operator can use the default value defined in the <code>form_types</code> section of the metadata or configure the banner by editing the <strong>Example string</strong> value in Ops Manager.</p>

<p><img alt="Runtime Config Tile Information" src="img/runtime-config-tile.png" /></p>

        <div><a id='repo-link' href='http://github.com/pivotal-cf/docs-tiledev/tree/master/runtime-config.html.md.erb'>View the source for this page in GitHub</a></div>

      </main>
    </div>
  </div>
</div>

<div id="scrim"></div>

<div class="container">
  <footer class="site-footer-links">
    <div class="copyright">
  <a href='https://pivotal.io/privacy-policy'>Privacy Policy</a> | 
  <a href='https://pivotal.io/terms-of-use'>Terms of Use</a><br/>
  <a href='/'>Pivotal Documentation</a>
  &copy; 2017 <a href='https://pivotal.io'>Pivotal Software</a>, Inc. All Rights Reserved.
</div>
<div class="support">
  Need help? <a href="" target="_blank">Visit Support</a>
</div>

  </footer>
</div><!--end of container-->

</body>
</html>
