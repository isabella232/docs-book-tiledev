<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,400italic,400,600' rel='stylesheet' type='text/css'>
  <!-- Use title if it's in the page YAML frontmatter -->
  <title>
      Configuring Disk and VM Type Defaults for On-Demand Service Tiles |
    
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/stylesheets/all.css" rel="stylesheet" media="screen, print" />
  <link href="/stylesheets/print.css" rel="stylesheet" media="print" />
  <link href='/images/favicon.ico' rel='shortcut icon'>

  <script src="/javascripts/all.js"></script>
  
<script type="text/javascript">
  if (window.location.host === 'docs.pivotal.io') {
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', '']);
    _gaq.push(['_setDomainName', '']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ga, s);
    })();
  }
</script>

<script type="text/javascript">
  var blackList = ['acceptance'];

  blackList.forEach(function(blackListedEnv) {
    if (document.URL.indexOf(blackListedEnv) > -1 && blackListedEnv != "") {
      $('head').append('<meta name="hashtag" content="PivotalMoment">');
    }
  });
</script>

<!-- CrazyEgg Tracking Script -->
  <script type="text/javascript">
  setTimeout(function(){var a=document.createElement("script");
  var b=document.getElementsByTagName("script")[0];
  a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0055/2990.js?"+Math.floor(new Date().getTime()/3600000);
  a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
  </script>

<!-- Munchkin Marketo Script -->
<script type="text/javascript">
  (function() {
    var didInit = false;

    function initMunchkin() {
      if (didInit === false) {
        didInit = true;
        Munchkin.init('625-IUJ-009');
      }
    }

    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
    s.onreadystatechange = function() {
      if (this.readyState == 'complete' || this.readyState == 'loaded') {
        initMunchkin();
      }
    };
    s.onload = initMunchkin;
    document.getElementsByTagName('head')[0].appendChild(s);
  })();
</script>

</head>

<body class="tiledev tiledev_1-12 tiledev_1-12_odb-resource-defaults has-subnav">

<div class="viewport">
  <div class='wrap'>
    <script type="text/javascript">
      document.domain = "";
    </script>

       
    <header class="header header-layout">
      <h1 class="logo">
        <a href="/">Default Book Title</a>
      </h1>
      
      <div class="header-links js-bar-links">
        <div class="btn-menu" data-behavior="MenuMobile"></div>
        
        <div class="header-item">
          
        </div>
        <!--Default search-->
<!--If book needs something different, add a book-search partial to the book's layouts folder-->
<div class="header-item searchbar js-searchbar">
  <a class="search-icon" data-behavior="Search"></a>
  <div class="search-input">
    <div class="search-input-inner" id="docs-search">
        <form method="get" action="/search">
          <input name="q" placeholder="search" class="search-box" />
        </form>
    </div>
  </div>
</div>

      </div>
    </header>



    <div class="container">

      <!--googleoff: index-->
      <div id="sub-nav" class="js-sidenav nav-container" role="navigation">
  <a class="sidenav-title" data-behavior="SubMenuMobile">
    Doc Index
  </a>
  <div class="nav-content">
    <ul>

      <li>
        <a href="index.html">PCF Tile Developers Guide</a>
      </li>

      <li class="has_submenu">
        <a href="tile-basics.html">Tile Basics</a>
        <ul>
          <li>
            <a href="cf-concepts.html">How PCF and PCF Services Work</a>
          </li>
          <li>
            <a href="tile-structure.html">How Tiles Work</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu">
        <a href="workflow.html">Tile Development Workflow</a>
        <ul>
          <li>
            <a href="overview.html">Service Integration Overview</a>
          </li>
          <li>
            <a href="stages.html">Levels of Integration</a>
          </li>
          <li>
            <a href="development.html">Development Steps at Each Level</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu">
        <a href="environments.html">Development Environments</a>
        <ul>
          <li>
            <a href="environments.html#pcfdev">PCF Dev and BOSH Lite</a>
          </li>
          <li>
            <a href="environments.html#pws">PWS or Other Supported CF Infrastructure</a>
          </li>
          <li>
            <a href="environments.html#pcf">PCF with Ops Manager</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu">
        <a href="tools.html">Development Tools</a>
        <ul>
          <li>
            <a href="tile-generator.html">Tile Generator</a>
          </li>
          <li>
            <a href="pcf-command.html">pcf Command Line Utility</a>
          </li>
          <li>
            <a href="concourse.html">Concourse CI</a>
          </li>
          <li>
            <a href="sdk.html">Services SDK</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu expanded">
        <a href="roadmap.html">Service Development Roadmap</a>
        <ul>
          <li>
            <a href="roadmap.html#user-provided">Level 1: User-Provided Service</a>
          </li>
          <li class="has_submenu">
            <a href="brokered.html">Level 2: Brokered Service</a>
            <ul>
              <li>
                <a href="service-brokers.html">Service Broker</a>
              </li>
            </ul>
           </li> 
          <li class="has_submenu">
            <a href="managed.html">Level 3: Managed Service</a>
            <ul>
              <li>
                <a href="bosh-release.html">BOSH Releases</a>
              </li>
              <li>
                <a href="tile-errands.html">Errands</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="on-demand.html">Level 4: On-Demand Service</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu">
        <a href="other-integrations.html">Other Integrations</a>
        <ul>
          <li>
            <a href="https://github.com/cloudfoundry/docs-bbr/blob/master/bbr-devguide.html.md.erb">BOSH Backup and Restore</a>
          </li>
          <li>
            <a href="buildpacks.html">Buildpacks</a>
          </li>
          <li class="has_submenu">
            <a href="credhub.html">CredHub</a>
            <ul>
              <li>
                <a href="create-credhub-vars.html">Creating New Variables in CredHub</a>
              </li>
              <li>
                <a href="migrating-credhub-credentials.html">Migrating Existing Credentials to CredHub</a>
              </li>
              <li>
                <a href="get-credhub-vars.html">Fetching Variable Names and Values</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="embedded-agents.html">Embedded Agents</a>
          </li>
          <li>
            <a href="nozzle.html">Logs, Metrics, and Nozzles</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="tile-documentation.html">Documentation</a>
      </li>

      <li class="has_submenu">
        <a href="publish.html">Publish and Update</a>
        <ul>
          <li>
            <a href="tile-upgrades.html">Tile Upgrades</a>
          </li>
          <li>
            <a href="releases.html">Partner Software Product Release Cycle</a>
          </li>
        </ul>
      </li>


      <li class="has_submenu">
        <a href="reference.html">Reference</a>
        <ul>
          <li>
            <a href="product-template-reference.html">Product Template Reference</a>
          </li>
          <li>
            <a href="property-reference.html">Property Reference</a>
          </li>
        </ul>
      </li>

      <li class="has_submenu">
        <a href="release-notes.html">Partners Release Notices</a>
        <ul>
          <li>
            <a href="release-notes-1-12.html">PCF v1.12 Partners Release Notice</a>
          </li>
          <li>
            <a href="release-notes-1-11.html">PCF v1.11 Partners Release Notice</a>
          </li>
          <li>
            <a href="release-notes-1-10.html">PCF v1.10 Partners Release Notice</a>
          </li>
          <li>
            <a href="release-notes-1-9.html">PCF v1.9 Partners Release Notice</a>
          </li>
          <li>
            <a href="release-notes-1-8.html">PCF v1.8 Partners Release Notice</a>
          </li>
          <li>
            <a href="release-notes-1-7.html">PCF v1.7 Partners Release Notice</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="contacts.html">Contact Us</a>
      </li>

    </ul>
  </div>
</div><!--end of sub-nav-->

      <!--googleon: index-->

      <main class="content content-layout" id="js-content" role="main">
        <a id="top"></a>
        
          <h1 class="title-container" >
    Configuring Disk and VM Type Defaults for On-Demand Service Tiles
  </h1>

          <div id="js-quick-links" >
            <div class="quick-links"><ul><li>
<a href="#defaults">VM and Persistent Disk Types</a><ul>
<li><a href="#vm-type">Set VM Type Defaults</a></li>
<li><a href="#disk-type">Set Persistent Disk Type Defaults</a></li>
</ul>
</li></ul></div>
          </div>
        <div class="to-top" id="js-to-top">
          <a href="#top" title="back to top"></a>
        </div>
        <p class="note"><strong>Note</strong>: Ops Manager 2.0 and later supports defining VM and disk type defaults and constraints.</p>

<p>This topic describes how tile authors can configure the dropdown menu items for VM types and persistent disk types in their tile.</p>

<p>On-demand service tiles have a configuration pane for each service plan.
Operators use dropdown menus on the plan configuration pane to set the VM type and persistent disk type for each instance of that plan.</p>

<p>Ops Manager populates the menus with options based on the VM and disk options available on the current IaaS.
Setting default values for VMs and disk types helps operators to choose the right resources for on-demand service broker (ODB) services when using on-demand plans.</p>

<h2><a id="defaults"></a>VM and Persistent Disk Types</h2>

<p>The property that defines the VM type options is <code>vm_type_dropdown</code>, and the menu options for disk type come from the <code>disk_type_dropdown</code> property.
Tile authors do not specify the menu items in the product template.</p>

<p>Because VM and disk options differ by IaaS, Ops Manager uses a best-fit algorithm to match defaults to their closest equivalents on the IaaS, similar to how the <strong>Resource Config</strong> pane handles its <strong>VM Type</strong> and <strong>Persistent Disk Type</strong> options.</p>

<p>If a tile developer does not include a default value for a VM or disk resource, and then an operator configuring the tile does not choose a value from the dropdown, Ops Manager by default sets the resource to the smallest option available on the IaaS.</p>

<h3><a id="vm-type"></a>Set VM Type Defaults</h3>

<p>For <code>vm_type_dropdown</code> the resources are <code>ram</code>, <code>ephemeral_disk</code>, and <code>cpu</code>.
Tile authors can also apply <code>constraints</code> to any of these resources.
Constraints can include <code>min</code> or <code>power_of_two</code>.
For example:</p>
<pre class="highlight yaml"><code>  <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">example_vm_type</span>
    <span class="s">type</span><span class="pi">:</span> <span class="s">vm_type_dropdown</span>
    <span class="s">configurable</span><span class="pi">:</span> <span class="s">true</span>
    <span class="s">resource_definitions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">ram</span>
      <span class="s">default</span><span class="pi">:</span> <span class="s">1024</span>
      <span class="s">constraints</span><span class="pi">:</span>
        <span class="s">min</span><span class="pi">:</span> <span class="s">1024</span>
        <span class="s">power_of_two</span><span class="pi">:</span> <span class="s">true</span>
    <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">ephemeral_disk</span>
      <span class="s">default</span><span class="pi">:</span> <span class="s">1024</span>
    <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">cpu</span>
      <span class="s">default</span><span class="pi">:</span> <span class="s">1</span>
</code></pre>

<h3><a id="disk-type"></a>Set Persistent Disk Type Defaults</h3>

<p>For <code>disk_type_dropdown</code> the resource is <code>persistent_disk</code>.
Tile authors can also apply <code>constraints</code> to this resource.
Constraints can include <code>min</code> or <code>power_of_two</code>.
For example:</p>
<pre class="highlight yaml"><code>  <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">example_disk_type_dropdown</span>
    <span class="s">type</span><span class="pi">:</span> <span class="s">disk_type_dropdown</span>
    <span class="s">configurable</span><span class="pi">:</span> <span class="s">true</span>
    <span class="s">resource_definitions</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">persistent_disk</span>
        <span class="s">default</span><span class="pi">:</span> <span class="s">2000</span>
        <span class="s">constraints</span><span class="pi">:</span>
          <span class="s">min</span><span class="pi">:</span> <span class="s">50</span>
          <span class="s">power_of_two</span><span class="pi">:</span> <span class="s">false</span>
</code></pre>

        <div><a id='repo-link' href='http://github.com/pivotal-cf/docs-tiledev/tree/1.12/odb-resource-defaults.html.md.erb'>View the source for this page in GitHub</a></div>

      </main>
    </div>
  </div>
</div>

<div id="scrim"></div>

<div class="container">
  <footer class="site-footer-links">
    <div class="copyright">
  <a href='https://pivotal.io/privacy-policy'>Privacy Policy</a> | 
  <a href='https://pivotal.io/terms-of-use'>Terms of Use</a><br/>
  <a href='/'>Pivotal Documentation</a>
  &copy; 2017 <a href='https://pivotal.io'>Pivotal Software</a>, Inc. All Rights Reserved.
</div>
<div class="support">
  Need help? <a href="" target="_blank">Visit Support</a>
</div>

  </footer>
</div><!--end of container-->

</body>
</html>
